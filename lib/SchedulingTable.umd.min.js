(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["SchedulingTable"]=t(require("vue")):e["SchedulingTable"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(){"use strict";var t={82:function(e,t){t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[i,o]of t)n[i]=o;return n}},203:function(t){t.exports=e}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var l=n[e]={exports:{}};return t[e](l,l.exports,i),l.exports}!function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.p=""}();var o={};return function(){if(i.r(o),i.d(o,{default:function(){return C}}),"undefined"!==typeof window){var e=window.document.currentScript,t=e&&e.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);t&&(i.p=t[1])}var n=i(203);const l={class:"float-left"},r={class:"week-table float-left clearfix"},a={class:"clearfix position-relative"},s={class:"parts"},c={class:"label"},d={class:"all-courses float-left"},m={class:"clearfix"},u=["onClick"];function p(e,t,i,o,p,h){const f=(0,n.resolveComponent)("CourseCard");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"course-table clearfix",style:(0,n.normalizeStyle)({width:`${h.tableWidth}px`})},[(0,n.createElementVNode)("div",l,[(0,n.createElementVNode)("div",{class:"top-table clearfix",style:(0,n.normalizeStyle)({height:`${p.dayHeight}px`,top:`${i.stickyTop}px`})},[(0,n.createElementVNode)("div",{class:"menu float-left",style:(0,n.normalizeStyle)({width:`${p.sectionWidth}px`})},null,4),(0,n.createElementVNode)("div",r,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(p.weekTable,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["day","float-left","content-center",i.showTimeline&&p.nowDay==t+1?"active":""]),key:t,style:(0,n.normalizeStyle)({width:`${p.dayWidth}px`})},(0,n.toDisplayString)(e),7)))),128))])],4),(0,n.createElementVNode)("div",a,[i.showTimeline?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"now-timeline",style:(0,n.normalizeStyle)({top:`${p.nowTimelineTop}px`})},[(0,n.createElementVNode)("div",{class:"label",style:(0,n.normalizeStyle)({width:`${p.sectionWidth}px`})},(0,n.toDisplayString)(p.nowTimeStr),5),(0,n.createElementVNode)("div",{class:"now-point",style:(0,n.normalizeStyle)({left:`${p.sectionWidth+(p.nowDay>0?p.nowDay-1:0)*p.dayWidth}px`})},null,4)],4)):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",{class:"float-left section-table",style:(0,n.normalizeStyle)({width:`${p.sectionWidth}px`})},[(0,n.createElementVNode)("div",null,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(h.parts,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"section content-center",key:t,style:(0,n.normalizeStyle)({height:`${e.height}px`})},null,4)))),128))]),(0,n.createElementVNode)("div",s,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(h.markers,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:t,style:(0,n.normalizeStyle)({height:`${e.height}px`}),class:"part"},[(0,n.createElementVNode)("div",c,(0,n.toDisplayString)(e.label),1)],4)))),128))])],4),(0,n.createElementVNode)("div",d,[(0,n.createElementVNode)("div",m,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(p.weekTable,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["col","float-left",i.showTimeline&&p.nowDay==t+1?"active":""]),key:t,style:(0,n.normalizeStyle)({width:`${p.dayWidth}px`})},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(h.parts,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{class:"cell",onClick:t=>h.add(e),key:t,style:(0,n.normalizeStyle)({height:`${e.height}px`})},null,12,u)))),128))],6)))),128))]),((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(i.modelValue,((e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:e.id,class:"course-wrap",style:(0,n.normalizeStyle)({width:`${p.dayWidth}px`,height:(60*(e.end[0]-e.start[0])+(e.end[1]-e.start[1]))*p.pixelOfMinutes+"px",left:(e.day-1)*p.dayWidth+"px",top:(60*(e.start[0]-h.parts.morning.start[0])+e.start[1])*p.pixelOfMinutes+"px"})},[(0,n.createVNode)(f,{onEdit:h.editCourse,onRemove:h.removeCourse,index:t,course:e},null,8,["onEdit","onRemove","index","course"])],4)))),128))])])])],4)}const h={class:"course-content"},f={class:"actions clearfix"};function y(e,t,i,o,l,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",h,[(0,n.createElementVNode)("div",null,(0,n.toDisplayString)(i.course.name),1),(0,n.createElementVNode)("div",null,(0,n.toDisplayString)(r.fixNumber(i.course.start[0]))+":"+(0,n.toDisplayString)(r.fixNumber(i.course.start[1]))+" - "+(0,n.toDisplayString)(r.fixNumber(i.course.end[0]))+":"+(0,n.toDisplayString)(r.fixNumber(i.course.end[1])),1),(0,n.createElementVNode)("div",f,[(0,n.createElementVNode)("div",{onClick:t[0]||(t[0]=e=>r.removeCourse(i.index)),class:"action delete"}," 删除 "),(0,n.createElementVNode)("div",{onClick:t[1]||(t[1]=e=>r.editCourse(i.index)),class:"action edit"},"编辑")])])}function g(e){return e=""+e,e[1]?e:"0"+e}var v={name:"CourseCard",emits:["add","edit","remove"],props:{course:Object,index:Number},methods:{fixNumber:g,formatTime(e){return e=""+e,e[1]?e:"0"+e},editCourse(e){this.$emit("edit",e)},removeCourse(e){this.$emit("remove",e)}}},k=i(82);const x=(0,k.Z)(v,[["render",y],["__scopeId","data-v-618637f6"]]);var b=x,w={name:"SchedulingTable",components:{CourseCard:b},emits:["add","edit","remove"],props:{modelValue:null,minuteHeight:{type:Number,default:1},showTimeline:{type:Boolean,default:!1},stickyTop:{type:Number,default:0}},data(){return{CardsData:this.modelValue,weekTable:["周一","周二","周三","周四","周五","周六","周日"],sectionTable:["早","上","下","晚"],sectionWidth:60,dayHeight:50,dayWidth:120,sectionHeight:100,pixelOfMinutes:this.minuteHeight,nowTimelineTop:0,nowTimeStr:"00:00",nowDay:0,timer:null}},created(){this.timer=setInterval((()=>{const e=new Date,t=e.getHours(),n=e.getMinutes();t<this.parts.morning.start[0]||t>=this.parts.night.end[0]?this.nowTimelineTop=0:(this.nowDay=e.getDay(),this.nowTimelineTop=(60*(t-this.parts.morning.start[0])+n)*this.pixelOfMinutes,this.nowTimeStr=`${g(t)}:${g(n)}`)}),1e3)},computed:{markers(){const e=this.parts.morning.start[0],t=this.parts.night.end[0],n=[],i=60*this.pixelOfMinutes;for(let o=e;o<t;o++)n.push({label:`${g(o)}:00`,height:i});return n},tableWidth(){const e=this.sectionWidth+this.weekTable.length*this.dayWidth;return e},tableHeight(){const e=this.dayHeight+this.morningHeight+this.forenoonHeight+this.afternoonHeight+this.nightHeight;return e},parts(){return{morning:{name:"早",height:180*this.pixelOfMinutes,start:[5,0],end:[8,0]},forenoon:{name:"上",height:300*this.pixelOfMinutes,start:[8,0],end:[13,0]},afternoon:{name:"下",height:300*this.pixelOfMinutes,start:[13,0],end:[18,0]},night:{name:"晚",height:300*this.pixelOfMinutes,start:[18,0],end:[23,0]}}}},methods:{add(e){this.$emit("add",e)},editCourse(e){this.$emit("edit",e,this.CardsData[e])},removeCourse(e){this.$emit("remove",e,this.CardsData[e])}}};const E=(0,k.Z)(w,[["render",p],["__scopeId","data-v-435c557e"]]);var S=E;const B={SchedulingTable:S},T=e=>{T.installed||(T.installed=!0,Object.keys(B).forEach((t=>e.component(t,B[t]))))};var N={install:T},C=N}(),o}()}));
//# sourceMappingURL=SchedulingTable.umd.min.js.map